"use strict";(self.webpackChunkexpense_tracker_live=self.webpackChunkexpense_tracker_live||[]).push([[318],{9318:function(e,t,s){s.r(t),s.d(t,{default:function(){return x}});var n=s(885),a=s(2791),i=s(3105),r=s(7717),o=s(3064),l=s(184);function d(e){var t=e.children,s=e.title,n=e.isUpdated,i=e.isEditing,o=(0,a.useContext)(r.t),d=o.setIsModal,c=o.isModal;return(0,l.jsx)(l.Fragment,{children:(c||n)&&(0,l.jsx)("div",{className:"modal-dialog",style:{width:"50%",margin:"auto",paddingBottom:"50px"},children:(0,l.jsxs)("div",{className:"modal-content",children:[(0,l.jsxs)("div",{className:"modal-header",children:[(0,l.jsx)("h5",{className:"modal-title",id:"staticBackdropLabel",onClick:function(){i()},children:s}),!n&&(0,l.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:function(){d(!1)}})]}),(0,l.jsx)("div",{className:"modal-body",children:t})]})})})}var c=s(5829),u=s(4342),p=s(9434),m=/(?:https?):(\w+:?\w*)?(\S+)(:\d+)?(|([\w#!:.?+=&%!]))?/,h=function(e){return e.length>=2},f=function(e){return m.test(e)};function x(){var e=(0,a.useContext)(r.t),t=e.isModal,s=e.setIsModal,m=(0,a.useState)(!1),x=(0,n.Z)(m,2),b=x[0],y=x[1],v=(0,a.useContext)(o.R),g=v.isMessage,j=v.setIsMessage,N=v.isToaster,k=v.setIsToaster,C=(0,a.useState)(!0),S=(0,n.Z)(C,2),T=S[0],w=S[1],E=(0,p.v9)((function(e){return e.auth.jwtToken})),Z=(0,a.useState)(!1),P=(0,n.Z)(Z,2),I=P[0],B=P[1],O=(0,a.useState)(!1),F=(0,n.Z)(O,2),V=F[0],H=F[1],M=(0,a.useState)(!1),R=(0,n.Z)(M,2),U=R[0],A=R[1];console.log(E);var D=(0,i.Z)(h),J=D.value,Y=D.isValid,_=D.hasError,q=D.inputChangeHandler,z=D.onBlurHandler,K=D.setEnteredValue,L=(0,i.Z)(f),Q=L.value,X=L.isValid,G=L.hasError,W=L.inputChangeHandler,$=L.onBlurHandler,ee=L.setEnteredValue,te=!1;Y&&X&&(te=!0);var se={idToken:E,displayName:J,photoUrl:Q,returnSecureToken:!0};(0,a.useEffect)((function(){fetch("https://identitytoolkit.googleapis.com/v1/accounts:lookup?key=AIzaSyCJx5BaRP2wpkK7EusD5XYqdvO-F3eTyQs",{method:"POST",body:JSON.stringify({idToken:E}),heders:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){(e.users[0].displayName.length||e.users[0].photoUrl.length>0)&&(B(!0),K(e.users[0].displayName),ee(e.users[0].photoUrl)),A(e.users[0].emailVerified)}))}),[E,K,ee]);var ne={requestType:"VERIFY_EMAIL",idToken:E};return console.log(t),(0,l.jsxs)(l.Fragment,{children:[!U&&(0,l.jsx)("div",{className:"mx-auto",style:{textAlign:"center",paddingTop:"3rem"},children:(0,l.jsxs)("span",{className:"border border-primary p-3 ",children:["Your email is not verified.",(0,l.jsx)("span",{style:{color:"blue",cursor:"pointer",textDecoration:"underline"},onClick:function(){fetch("https://identitytoolkit.googleapis.com/v1/accounts:sendOobCode?key=AIzaSyCJx5BaRP2wpkK7EusD5XYqdvO-F3eTyQs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ne)})},children:"Verify it now!"})]})}),!I&&(0,l.jsx)("div",{className:"mx-auto",style:{textAlign:"center",paddingTop:"3rem"},children:(0,l.jsxs)("span",{className:"border border-primary p-3",children:["Your profile is incomplete!",(0,l.jsx)("span",{style:{color:"blue",cursor:"pointer",textDecoration:"underline"},onClick:function(){s(!0)},children:"Complete it now"})]})}),N&&(0,l.jsx)(u.Z,{message:g.message,type:g.type}),(t||I)&&(0,l.jsxs)(d,{title:I?"Edit Profile":"Update Profile",isUpdated:I,isEditing:function(){H(!0)},children:[(0,l.jsx)("form",{onSubmit:function(e){w(!1),y(!0),e.preventDefault(),te?fetch("https://identitytoolkit.googleapis.com/v1/accounts:update?key=AIzaSyCJx5BaRP2wpkK7EusD5XYqdvO-F3eTyQs",{method:"POST",body:JSON.stringify(se),heders:{"Content-Type":"application/json"}}).then((function(e){e.ok?(B(!0),s(!1),y(!1),w(!0),k(!0),H(!1),j({message:"your profile is successfully update",type:"success"}),e.json().then((function(e){return console.log(e)}))):(k(!0),j({message:"Something went wrong. Please try again later",type:"danger"}))})):(w(!0),y(!1),console.log("not valid"),z(),$())},children:(0,l.jsxs)("fieldset",{disabled:V||!I?"":"disabled",children:[(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("label",{htmlFor:"name",className:"form-label",children:"Full Name"}),(0,l.jsx)("input",{type:"text",className:"form-control",id:"name","aria-describedby":"nameHelp",value:J,onChange:q,onBlur:z}),(0,l.jsx)("div",{id:"update-error",className:"form-text",children:_&&"Please enter a valid name"})]}),(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("label",{htmlFor:"pfurl",className:"form-label",children:"Profile Photo URL"}),(0,l.jsx)("input",{type:"text",className:"form-control",id:"pfurl",value:Q,onChange:W,onBlur:$}),(0,l.jsx)("div",{id:"update-error",className:"form-text",children:G&&"Please enter a valid url"})]}),T&&(0,l.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"}),b&&(0,l.jsx)(c.Z,{})]})}),(0,l.jsx)("br",{}),(0,l.jsx)("img",{src:Q,alt:J,width:"450px",height:"200px"})]})]})}},5829:function(e,t,s){s.d(t,{Z:function(){return a}});s(2791);var n=s(184);function a(e){var t=e.title;return(0,n.jsxs)("button",{className:"btn btn-primary",type:"button",disabled:!0,children:[(0,n.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),(0,n.jsxs)("span",{className:"visually-hidden",children:[t,"..."]})]})}},4342:function(e,t,s){s.d(t,{Z:function(){return r}});var n=s(2791),a=s(3064),i=s(184);function r(e){var t=e.message,s=e.type,r=(0,n.useContext)(a.R),o=r.setIsToaster,l=r.isToaster;return(0,n.useEffect)((function(){l&&setInterval((function(){o(!1)}),5e3)}),[l,o]),(0,i.jsx)("div",{className:"toast show align-items-center text-white bg-".concat(s," border-0 position-absolute top-50 end-0"),role:"alert","aria-live":"assertive","aria-atomic":"true",children:(0,i.jsxs)("div",{className:"d-flex",children:[(0,i.jsx)("div",{class:"toast-body",children:t}),(0,i.jsx)("button",{type:"button",className:"btn-close btn-close-white  me-2 m-auto","data-bs-dismiss":"toast","aria-label":"Close",onClick:function(){o(!1)}})]})})}},3105:function(e,t,s){s.d(t,{Z:function(){return i}});var n=s(885),a=s(2791);function i(e){var t=(0,a.useState)(""),s=(0,n.Z)(t,2),i=s[0],r=s[1],o=(0,a.useState)(!1),l=(0,n.Z)(o,2),d=l[0],c=l[1],u=e(i);return{value:i,isValid:u,hasError:!u&&d,inputChangeHandler:function(e){r(e.target.value)},onBlurHandler:function(e){c(!0)},setEnteredValue:r,reset:function(){r(""),c("")}}}}}]);
//# sourceMappingURL=318.0892f42c.chunk.js.map